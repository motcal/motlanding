<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" 
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" type="image/png" href="mesh.png">
  <title>Mesh Optical Technologies</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100vh;
      background-color: black;
      color: white;
      font-family: monospace;
      overflow: hidden;
    }
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .header {
      font-size: min(1.1vw, 1.1vh);
      font-weight: bold;
      margin-bottom: 2vh;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.8);
    }
    .content {
      max-width: 60vw;
      font-size: min(1.8vw, 1.8vh);
      line-height: 1.6;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.85);
    }
    @media (max-width: 1000px) {
      .header {
        font-size: min(.9vw, .9vh);
        margin-top: -14vh;
      }
      .content {
        font-size: min(3vw, 3vh);
        max-width: 70vw;
      }
    }
    #laserContainer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 1;
    }
    .laser {
      position: absolute;
      top: 0;
      left: 0;
      color: white;
      white-space: nowrap;
      transform-origin: left center;
    }
  </style>
</head>
<body>
  <div id="laserContainer"></div>

  <!-- Header Text -->
  <div class="header" id="header">
    <pre>
  ░▒▓██████████████▓▒░░▒▓████████▓▒░░▒▓███████▓▒░▒▓█▓▒░░▒▓█▓▒░       ░▒▓██████▓▒░░▒▓███████▓▒░▒▓████████▓▒░▒▓█▓▒░░▒▓██████▓▒░ ░▒▓██████▓▒░░▒▓█▓▒░        
  ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
  ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░   ░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
  ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓██████▓▒░  ░▒▓██████▓▒░░▒▓████████▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░  ░▒▓█▓▒░   ░▒▓█▓▒░▒▓█▓▒░      ░▒▓████████▓▒░▒▓█▓▒░        
  ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        ░▒▓█▓▒░   ░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
  ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        ░▒▓█▓▒░   ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
  ░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░▒▓███████▓▒░░▒▓█▓▒░░▒▓█▓▒░       ░▒▓██████▓▒░░▒▓█▓▒░        ░▒▓█▓▒░   ░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░ 
                                                                                                                                                        
                                                                                                                                                        
  ░▒▓████████▓▒░▒▓████████▓▒░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░ ░▒▓██████▓▒░░▒▓█▓▒░      ░▒▓██████▓▒░ ░▒▓██████▓▒░░▒▓█▓▒░▒▓████████▓▒░░▒▓███████▓▒░   
    ░▒▓█▓▒░   ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░          
    ░▒▓█▓▒░   ░▒▓█▓▒░     ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░          
    ░▒▓█▓▒░   ░▒▓██████▓▒░░▒▓█▓▒░      ░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒▒▓███▓▒░▒▓█▓▒░▒▓██████▓▒░  ░▒▓██████▓▒░    
    ░▒▓█▓▒░   ░▒▓█▓▒░     ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░   
    ░▒▓█▓▒░   ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░             ░▒▓█▓▒░   
    ░▒▓█▓▒░   ░▒▓████████▓▒░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓████████▓▒░▒▓██████▓▒░ ░▒▓██████▓▒░░▒▓█▓▒░▒▓████████▓▒░▒▓███████▓▒░    
                                                                                                                                                                                                                                                                                   
    </pre>
  </div>

  <!-- Centered Body Text -->
  <div class="content" id="content">
    Mesh Optical Technologies designs and manufactures the world's most advanced optical computing hardware.<br><br>

    We believe in engineering to the limit of physics, building our own factories, and writing software that maximizes the capability of our hardware.<br><br>

    If you are interested in helping us build our first factory in Los Angeles, please send your resume to join at meshoptical dot com.
  </div>

  <script>
    /********************************************************
     * Configuration
     ********************************************************/
    const numBeams = 6;                // Number of laser beams
    const startingLaserText = "⬡";     // Starting laser trail
    const diffractionPatterns = [
      "/\\/\\/\\/\\/\\/",
      "- - - - - -",
      "~ ~ ~ ~ ~ ~",
      ". . . . . .",
      "⬡",
    ];
    const TYPING_SPEED = 70; // ms per character
    const CROSSING_TIME = 7; // seconds to cross screen width

    /********************************************************
     * Globals & Initialization
     ********************************************************/
    let width = window.innerWidth;
    let height = window.innerHeight;

    const headerEl = document.getElementById("header");
    const contentEl = document.getElementById("content");
    const laserContainer = document.getElementById("laserContainer");

    let beams = [];

    // Compute speed (pixels per frame) to cross screen in ~ CROSSING_TIME
    function getSpeed() {
      // 60 frames/second * CROSSING_TIME = total frames
      // distance = screen width
      // speed = distance / frames
      return width / (60 * CROSSING_TIME);
    }

    // Update screen dimensions and recalc beam velocities on resize
    window.addEventListener("resize", () => {
      width  = window.innerWidth;
      height = window.innerHeight;

      // Recompute and update speed for each beam
      for (let beam of beams) {
        let angleRad = Math.atan2(beam.dy, beam.dx);
        let s = getSpeed();
        beam.dx = s * Math.cos(angleRad);
        beam.dy = s * Math.sin(angleRad);
      }

      // Clear existing beams
      for (let beam of beams) {
        beam.element.remove();
      }
      beams = [];

      // Recreate beams
      for (let i = 0; i < numBeams; i++) {
        beams.push(createBeam());
      }
    });

    // Create the beams
    for (let i = 0; i < numBeams; i++) {
      beams.push(createBeam());
    }

    // Start the animation loop
    requestAnimationFrame(animate);

    /********************************************************
     * Beam creation & helper functions
     ********************************************************/
    // Listen for clicks anywhere in the document (even outside the body’s content)
    document.documentElement.addEventListener("click", function (evt) {
      const x = evt.clientX;
      const y = evt.clientY;
      // Create a new beam right where the user clicked
      const newBeam = createBeamAt(x, y);
      beams.push(newBeam);
    });

    function createBeam() {
      // 1) Randomly pick one of the four edges
      const edge = Math.floor(Math.random() * 4);

      // 2) Random angle in the correct range for that edge
      const angleDeg = randomAngleForEdge(edge);

      // 3) Convert angle to radians
      const angleRad = angleDeg * (Math.PI / 180);

      // 4) Create the DOM element for the beam
      const laserEl = document.createElement("div");
      laserEl.className = "laser";
      laserEl.textContent = startingLaserText;
      laserContainer.appendChild(laserEl);

      // 5) Position the beam at that edge
      let x = 0, y = 0;
      switch (edge) {
        case 0: // top
          x = Math.random() * (width - 50);
          y = 0;
          break;
        case 1: // right
          x = width;
          y = Math.random() * (height - 50);
          break;
        case 2: // bottom
          x = Math.random() * (width - 50);
          y = height;
          break;
        case 3: // left
          x = 0;
          y = Math.random() * (height - 50);
          break;
      }

      // 6) Compute velocity from angle + speed
      let dx = getSpeed() * Math.cos(angleRad);
      let dy = getSpeed() * Math.sin(angleRad);

      // 7) Return the beam object
      return {
        element: laserEl,
        x, y,        // current position
        dx, dy,      // velocity
        angleDeg,
        diffractionTimeout: null
      };
    }

    function createBeamAt(x, y) {
      const beam = createBeam();
      beam.x = x;
      beam.y = y;
      return beam;
    }

    // Returns a random angle (in degrees) that keeps the beam traveling inward.
    function randomAngleForEdge(edge) {
      // Angle ranges so the beam always travels inward:
      // top    => [30..70]   (downward-ish)
      // right  => [120..160] (leftward-ish)
      // bottom => [210..250] (upward-ish)
      // left   => [20..60]   (rightward-ish)
      switch (edge) {
        case 0: return randomRange(30, 70);
        case 1: return randomRange(120, 160);
        case 2: return randomRange(210, 250);
        case 3: return randomRange(20, 60);
      }
    }

    // Return a random number in [min, max].
    function randomRange(min, max) {
      return Math.random() * (max - min) + min;
    }

    /********************************************************
     * Main animation loop
     ********************************************************/
    function animate() {
      for (let beam of beams) {
        updateBeam(beam);
      }
      requestAnimationFrame(animate);
    }

    /********************************************************
     * Beam Update (position, bounce, diffraction)
     ********************************************************/
    function updateBeam(beam) {
      // 1) Move the beam
      beam.x += beam.dx;
      beam.y += beam.dy;

      // 2) Bounce off screen edges (simple bounding)
      const el = beam.element;
      const beamWidth = el.offsetWidth;
      const beamHeight = el.offsetHeight;

      let collided = false;

      // Left/right edges
      if (beam.x <= 0) {
        beam.x = 0;
        beam.dx = -beam.dx;
        collided = true;
      } else if (beam.x >= width) {
        beam.dx = -beam.dx;
        collided = true;
      }

      // Top/bottom edges
      if (beam.y <= 0) {
        beam.y = 0;
        beam.dy = -beam.dy;
        collided = true;
      } else if (beam.y + beamHeight >= height) {
        beam.y = height - beamHeight;
        beam.dy = -beam.dy;
        collided = true;
      }

      // If a collision occurred, update the diffraction effect
      if (collided) {
        updateDiffraction(beam);
      }

      // 4) Update rotation so the beam “points” in its moving direction
      const angleRad = Math.atan2(beam.dy, beam.dx);
      const angleDeg = angleRad * (180 / Math.PI);
      el.style.transform = `translate(${beam.x}px, ${beam.y}px) rotate(${angleDeg}deg)`;
    }

    /********************************************************
     * Diffraction Effect
     ********************************************************/
    function updateDiffraction(beam) {
      // Pick a random diffraction pattern
      const randomPattern = diffractionPatterns[
        Math.floor(Math.random() * diffractionPatterns.length)
      ];

      // Clear any existing typing effect
      if (beam.diffractionTimeout) {
        clearTimeout(beam.diffractionTimeout);
      }

      // Clear current text and start the typing effect
      beam.element.textContent = "";
      typeDiffraction(beam, randomPattern, 0);
    }

    // Recursive typing function for the diffraction effect
    function typeDiffraction(beam, text, index) {
      if (index < text.length) {
        beam.element.textContent += text.charAt(index);
        beam.diffractionTimeout = setTimeout(() => {
          typeDiffraction(beam, text, index + 1);
        }, TYPING_SPEED);
      }
    }
  </script>
</body>
</html>
